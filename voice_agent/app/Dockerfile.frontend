# Stage 1: Build the frontend code using Node.js  
FROM node:18-alpine AS build  
  
# Set the working directory  
WORKDIR /app  
  
# Copy package files and install dependencies  
COPY frontend/package*.json ./  
RUN npm install  
  
# Copy the frontend source code and build the application  
COPY frontend/ .  
RUN npm run build  
  
# Stage 2: Serve the static site using Nginx  
FROM nginx:alpine  
  
# Copy the production build from the previous stage  
COPY --from=build /app/dist /usr/share/nginx/html  
  
# Optionally copy a custom Nginx config (if needed for routing)  
# COPY nginx.conf /etc/nginx/nginx.conf  
  
# Expose port 80 for HTTP traffic  
EXPOSE 80  
  
# Start Nginx  
CMD ["nginx", "-g", "daemon off;"]  